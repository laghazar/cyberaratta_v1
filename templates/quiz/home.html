{% extends 'base.html' %}
{% load static %}
{% block title %}Իմացիր Կիբեռը{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/quiz-home.css' %}">
{% endblock %}

{% block content %}
<div class="quiz-container">
    <!-- Գլխագիր -->
    <div class="page-title">
        <h1>Իմացիր Կիբեռը</h1>
        <p>Ստուգեք և զարգացրեք ձեր կիբեռանվտանգության գիտելիքները</p>
    </div>
    
    <!-- Կերպարների ցուցադրում -->
    <div class="characters-container">
        <div class="character-card">
            <img src="{% static 'img/ara.jpg' %}" alt="Արա Գեղեցիկ" class="character-image">
            <div class="character-name">Արա Գեղեցիկ</div>
            <div class="character-type">Կիբեռգիտակ</div>
        </div>
        
        <div class="character-card">
            <img src="{% static 'img/shamiram.jpg' %}" alt="Շամիրամ" class="character-image">
            <div class="character-name">Շամիրամ</div>
            <div class="character-type">Կիբեռսովորող</div>
        </div>
    </div>
    
    <!-- Հիմնական ընտրության քարտեր -->
    <div class="cards-container">
        <!-- Ձախ քարտ - Ընտրության ձև -->
        <div class="selection-card">
            <h3>Քուիզի ընտրություն</h3>
            
            <form method="post" action="{% url 'quiz:start_quiz' %}" id="quiz-form">
                {% csrf_token %}
                
                <!-- Լսարանի ընտրություն -->
                <div class="options-group">
                    <h4>Ընտրեք Ձեր Լսարանը</h4>
                    
                    {% for category in categories %}
                    <div class="option-item">
                        <input type="radio" name="category" id="category-{{ category.id }}" value="{{ category.id }}" {% if forloop.first %}checked{% endif %}>
                        <label for="category-{{ category.id }}" class="option-card {% if forloop.first %}option-selected{% endif %}">
                            <div class="option-title">
                                {{ category.get_category_type_display }}
                                {% if category.professional_field %}
                                - {{ category.get_professional_field_display }}
                                {% endif %}
                            </div>
                            {% if category.description %}
                            <div class="option-description">{{ category.description|truncatechars:60 }}</div>
                            {% endif %}
                        </label>
                    </div>
                    {% endfor %}
                </div>
                
                <!-- Քուիզի տեսակի ընտրություն -->
                <div class="options-group">
                    <h4>Ընտրեք Քուիզի Տեսակը</h4>
                    
                    {% for value, display in Question.QUESTION_TYPES %}
                    <div class="option-item">
                        <input type="radio" name="question_type" id="question-type-{{ value }}" value="{{ value }}" {% if forloop.first %}checked{% endif %}>
                        <label for="question-type-{{ value }}" class="option-card {% if forloop.first %}option-selected{% endif %}">
                            <div class="option-title">{{ display }}</div>
                            <div class="option-description">
                                {% if value == 'classic' %}
                                Ուսուցողական հարցեր՝ կիբեռանվտանգության մասին
                                {% elif value == 'millionaire' %}
                                Խաղային հարցաշար՝ միլիոնատերի ոճով
                                {% endif %}
                            </div>
                        </label>
                    </div>
                    {% endfor %}
                </div>
                
                <!-- Կոճակներ -->
                <div class="action-buttons">
                    <button type="submit" class="btn-primary">Սկսել Քուիզը</button>
                </div>
            </form>
        </div>
        
        <!-- Աջ քարտ - Ինֆորմացիա -->
        <div class="selection-card">
            <h3>Տեղեկատվություն</h3>
            
            <!-- Ինչու մասնակցել -->
            <div class="info-card">
                <h4>Ինչու՞ մասնակցել</h4>
                <ul>
                    <li>Ստուգել Ձեր գիտելիքները կիբեռանվտանգության մասին</li>
                    <li>Սովորել ֆիշինգի հարձակումները ճանաչելու միջոցներ</li>
                    <li>Բացահայտել Ձեր կիբեռգիտակցության մակարդակը</li>
                    <li>Ստանալ անհատական խորհուրդներ</li>
                </ul>
            </div>
            
            <!-- Մոդուլների մասին -->
            <div class="info-card">
                <h4>Քուիզի մոդուլներ</h4>
                
                <div class="modules-container">
                    <div class="module-card">
                        <h4>Ուսուցողական</h4>
                        <p>Կիբեռանվտանգության մասին ուսուցողական հարցաշար</p>
                    </div>
                    
                    <div class="module-card">
                        <h4>Միլիոնատեր</h4>
                        <p>Ֆիշինգի թեմայով խաղային հարցաշար</p>
                    </div>
                </div>
            </div>
            
            <!-- Լիդերբորդ հղում -->
            <div class="action-buttons">
                <a href="{% url 'quiz:leaderboard' %}" class="btn-primary">Դիտել լավագույն արդյունքները</a>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Ընտրանքի լոգիկա
    const optionItems = document.querySelectorAll('.option-item');
    
    optionItems.forEach(item => {
        const input = item.querySelector('input[type="radio"]');
        const label = item.querySelector('label');
        
        label.addEventListener('click', function() {
            // Հեռացնել բոլոր ընտրված կլասերը նույն խմբից
            const name = input.getAttribute('name');
            document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
                const radioLabel = radio.nextElementSibling;
                radioLabel.classList.remove('option-selected');
            });
            
            // Ընտրել այս տարրը
            input.checked = true;
            label.classList.add('option-selected');
        });
    });
});
</script>
{% endblock %}